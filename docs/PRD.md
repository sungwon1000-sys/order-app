# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
커피 주문 앱

### 1.2 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹앱

### 1.3 개발 범위
- 주문하기 화면(메뉴 선택 및 장바구니 기능)
- 관리자 화면(재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
-프런트엔드: HTML, CSS, 리액트, 자바스크립트
-백엔드: Node.js, Express
-데이터베이스: PostgreSQL

## 3. 기본 사항
- 프런트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음

---

## 4. 화면 구성

앱은 두 개의 화면으로 구성된다.

| 화면 | 경로 | 설명 |
|------|------|------|
| 주문하기 | `/order` | 메뉴 선택, 옵션 설정, 장바구니, 주문 |
| 관리자 | `/admin` | 재고 관리, 주문 상태 관리 |

---

## 5. 주문하기 화면 PRD

### 5.1 화면 개요

사용자가 커피 메뉴를 탐색하고, 옵션을 선택한 뒤 장바구니에 담아 주문할 수 있는 화면이다.

> 와이어프레임: `docs/wireframes/order-screen.png`

### 5.2 레이아웃 구조

화면은 위에서 아래로 세 영역으로 나뉜다.

```
┌─────────────────────────────────────────────┐
│  헤더 (네비게이션 바)                          │
├─────────────────────────────────────────────┤
│                                             │
│  메뉴 목록 영역                               │
│  ┌────────┐  ┌────────┐  ┌────────┐        │
│  │ 카드 1  │  │ 카드 2  │  │ 카드 3  │  ...  │
│  └────────┘  └────────┘  └────────┘        │
│                                             │
├─────────────────────────────────────────────┤
│  장바구니 영역                                │
│  아이템 목록  |  총 금액 + 주문하기 버튼        │
└─────────────────────────────────────────────┘
```

### 5.3 영역별 상세 명세

#### 5.3.1 헤더 (네비게이션 바)

| 요소 | 위치 | 설명 |
|------|------|------|
| 카페 이름 | 좌측 | "COZY" 텍스트 표시 |
| 주문하기 버튼 | 우측 | 주문하기 화면으로 이동 (현재 화면이면 활성 상태 표시) |
| 관리자 버튼 | 우측 | 관리자 화면으로 이동 |

#### 5.3.2 메뉴 목록 영역

메뉴 카드가 가로로 나열된다. 카드 수가 많아지면 줄바꿈되어 다음 행에 표시된다.

**메뉴 카드 구성 요소 (위에서 아래 순서)**

| 순서 | 요소 | 설명 |
|------|------|------|
| 1 | 메뉴 이미지 | 메뉴의 대표 이미지 (없으면 플레이스홀더 표시) |
| 2 | 메뉴 이름 | 예: "아메리카노(ICE)" |
| 3 | 가격 | 예: "4,000원" |
| 4 | 간단한 설명 | 메뉴에 대한 짧은 설명 텍스트 |
| 5 | 옵션 목록 | 체크박스 형태의 추가 옵션 (아래 상세) |
| 6 | 담기 버튼 | 선택한 옵션과 함께 메뉴를 장바구니에 추가 |

**옵션 목록**

- 각 옵션은 체크박스로 표시된다.
- 옵션은 메뉴별로 다를 수 있다.
- 각 옵션에는 이름과 추가 금액이 표시된다.
- 예시:
  - `☐ 샷 추가 (+500원)`
  - `☐ 시럽 추가 (+0원)`

**담기 버튼 동작**

- 클릭 시 해당 메뉴와 선택된 옵션을 장바구니에 추가한다.
- 같은 메뉴+같은 옵션 조합이 이미 장바구니에 있으면 수량을 1 증가시킨다.
- 같은 메뉴라도 옵션 조합이 다르면 별도 항목으로 추가한다.
- 담기 후 해당 카드의 옵션 체크박스는 초기화(해제)된다.

#### 5.3.3 장바구니 영역

화면 하단에 고정 배치되며, 좌측에 아이템 목록, 우측에 총 금액과 주문하기 버튼이 표시된다.

**장바구니 아이템 목록 (좌측)**

| 요소 | 설명 |
|------|------|
| 제목 | "장바구니" 텍스트 |
| 아이템 행 | `메뉴명 (옵션) X 수량` 형식으로 표시 |
| 아이템 가격 | 해당 아이템의 소계 (단가 × 수량) |

- 예시: `아메리카노(ICE) (샷 추가) X 1    4,500원`
- 옵션이 없는 경우: `아메리카노(HOT) X 2    8,000원`

**총 금액 및 주문 (우측)**

| 요소 | 설명 |
|------|------|
| 총 금액 | "총 금액 **12,500원**" 형식으로 모든 아이템의 합계 표시 |
| 주문하기 버튼 | 장바구니의 모든 아이템을 주문으로 제출 |

### 5.4 사용자 시나리오

#### 시나리오 1: 메뉴 담기
1. 사용자가 메뉴 카드에서 원하는 옵션을 체크한다.
2. "담기" 버튼을 클릭한다.
3. 장바구니에 해당 메뉴가 추가되고, 총 금액이 갱신된다.
4. 카드의 옵션 체크박스가 초기화된다.

#### 시나리오 2: 같은 메뉴 추가 담기
1. 이미 장바구니에 "아메리카노(HOT)"이 1개 담겨 있다.
2. 사용자가 옵션 없이 다시 "아메리카노(HOT)"을 담는다.
3. 장바구니에서 해당 아이템의 수량이 1 → 2로 증가한다.

#### 시나리오 3: 주문하기
1. 장바구니에 1개 이상의 아이템이 있다.
2. 사용자가 "주문하기" 버튼을 클릭한다.
3. 주문이 서버에 전송된다.
4. 주문 성공 시 장바구니가 비워지고 완료 메시지가 표시된다.

### 5.5 예외 처리

| 상황 | 동작 |
|------|------|
| 장바구니가 비어 있을 때 주문하기 클릭 | 주문하기 버튼 비활성화 또는 안내 메시지 표시 |
| 주문 전송 실패 (네트워크 오류 등) | 에러 메시지 표시, 장바구니 유지 |
| 메뉴 데이터 로드 실패 | 에러 메시지 표시 |

### 5.6 데이터 모델 (프런트엔드 기준)

**메뉴 (Menu)**
```
{
  id: number,
  name: string,           // "아메리카노(ICE)"
  price: number,          // 4000
  description: string,    // "간단한 설명..."
  imageUrl: string | null,
  options: [
    { id: number, name: string, price: number }  // { id: 1, name: "샷 추가", price: 500 }
  ]
}
```

**장바구니 아이템 (CartItem)**
```
{
  menuId: number,
  menuName: string,
  basePrice: number,
  selectedOptions: [
    { id: number, name: string, price: number }
  ],
  quantity: number,
  totalPrice: number      // (basePrice + 옵션 합계) × quantity
}
```

---

## 6. 관리자 화면 PRD

### 6.1 화면 개요

관리자가 주문 현황을 한눈에 파악하고, 메뉴별 재고를 관리하며, 들어온 주문의 상태를 변경할 수 있는 화면이다.

> 와이어프레임: `docs/wireframes/admin-screen.png`

### 6.2 레이아웃 구조

화면은 위에서 아래로 네 영역으로 나뉜다.

```
┌─────────────────────────────────────────────┐
│  헤더 (네비게이션 바)                          │
├─────────────────────────────────────────────┤
│  관리자 대시보드                               │
│  총 주문 / 주문 접수 / 제조 중 / 제조 완료      │
├─────────────────────────────────────────────┤
│  재고 현황                                    │
│  ┌────────┐  ┌────────┐  ┌────────┐        │
│  │ 메뉴 1  │  │ 메뉴 2  │  │ 메뉴 3  │  ...  │
│  └────────┘  └────────┘  └────────┘        │
├─────────────────────────────────────────────┤
│  주문 현황                                    │
│  주문 시간 | 메뉴 x 수량 | 금액 | 상태 버튼    │
│  ...                                        │
└─────────────────────────────────────────────┘
```

### 6.3 영역별 상세 명세

#### 6.3.1 헤더 (네비게이션 바)

주문하기 화면과 동일한 헤더를 공유한다. 관리자 화면에서는 "관리자" 버튼이 활성 상태로 표시된다.

| 요소 | 위치 | 설명 |
|------|------|------|
| 카페 이름 | 좌측 | "COZY" 텍스트 표시 |
| 주문하기 버튼 | 우측 | 주문하기 화면으로 이동 |
| 관리자 버튼 | 우측 | 관리자 화면으로 이동 (현재 화면이면 활성 상태 표시) |

#### 6.3.2 관리자 대시보드

주문 통계를 한 줄로 요약하여 보여주는 영역이다.

| 항목 | 설명 |
|------|------|
| 총 주문 | 전체 주문 건수 |
| 주문 접수 | "주문 접수" 상태인 주문 건수 |
| 제조 중 | "제조 중" 상태인 주문 건수 |
| 제조 완료 | "제조 완료" 상태인 주문 건수 |

- 표시 형식: `총 주문 1 / 주문 접수 1 / 제조 중 0 / 제조 완료 0`
- 주문 상태가 변경되면 실시간으로 숫자가 갱신된다.

#### 6.3.3 재고 현황

메뉴별 현재 재고 수량을 카드 형태로 표시하고, 관리자가 직접 수량을 조절할 수 있는 영역이다.

**재고 카드 구성 요소**

| 순서 | 요소 | 설명 |
|------|------|------|
| 1 | 메뉴 이름 | 예: "아메리카노 (ICE)" |
| 2 | 재고 수량 | 예: "10개" |
| 3 | 증가(+) 버튼 | 재고 수량을 1 증가 |
| 4 | 감소(-) 버튼 | 재고 수량을 1 감소 |

**재고 조절 동작**

- `+` 버튼 클릭 시 해당 메뉴의 재고가 1 증가한다.
- `-` 버튼 클릭 시 해당 메뉴의 재고가 1 감소한다.
- 재고가 0일 때 `-` 버튼은 비활성화된다 (음수 불가).
- 변경된 재고는 서버에 즉시 반영된다.

#### 6.3.4 주문 현황

접수된 주문 목록을 표시하고, 관리자가 주문 상태를 단계별로 변경할 수 있는 영역이다.

**주문 행 구성 요소**

| 요소 | 설명 |
|------|------|
| 주문 시간 | 예: "7월 31일 13:00" |
| 주문 내용 | 예: "아메리카노(ICE) x 1" |
| 주문 금액 | 예: "4,000원" |
| 상태 버튼 | 현재 상태를 표시하고, 클릭하면 다음 상태로 전환 |

**주문 상태 흐름**

주문은 다음 순서로 상태가 전환된다.

```
주문 접수 → 제조 중 → 제조 완료
```

| 현재 상태 | 버튼 텍스트 | 클릭 시 전환 상태 |
|-----------|------------|-----------------|
| (신규 주문) | 주문 접수 | 주문 접수 |
| 주문 접수 | 제조 시작 | 제조 중 |
| 제조 중 | 제조 완료 | 제조 완료 |
| 제조 완료 | (버튼 비활성화 또는 숨김) | - |

- 상태 변경 시 대시보드의 통계 숫자가 실시간으로 갱신된다.
- 주문 목록은 최신 주문이 위에 오도록 시간 역순으로 정렬된다.

### 6.4 사용자 시나리오

#### 시나리오 1: 재고 조절
1. 관리자가 "아메리카노 (ICE)" 카드의 `+` 버튼을 클릭한다.
2. 재고 수량이 10개 → 11개로 증가한다.
3. 변경이 서버에 저장된다.

#### 시나리오 2: 주문 상태 변경 (전체 흐름)
1. 고객이 주문하기 화면에서 주문을 제출한다.
2. 관리자 화면의 주문 현황에 새 주문이 나타난다. (버튼: "주문 접수")
3. 관리자가 "주문 접수" 버튼을 클릭한다 → 상태가 "주문 접수"로 변경된다.
4. 대시보드: 총 주문 1 / 주문 접수 1 / 제조 중 0 / 제조 완료 0
5. 관리자가 "제조 시작" 버튼을 클릭한다 → 상태가 "제조 중"으로 변경된다.
6. 대시보드: 총 주문 1 / 주문 접수 0 / 제조 중 1 / 제조 완료 0
7. 관리자가 "제조 완료" 버튼을 클릭한다 → 상태가 "제조 완료"로 변경된다.
8. 대시보드: 총 주문 1 / 주문 접수 0 / 제조 중 0 / 제조 완료 1

#### 시나리오 3: 대시보드 확인
1. 관리자가 관리자 화면에 진입한다.
2. 대시보드에서 현재 총 주문 수, 각 상태별 주문 수를 확인한다.
3. 주문 현황 목록에서 세부 내역을 파악한다.

### 6.5 예외 처리

| 상황 | 동작 |
|------|------|
| 재고가 0일 때 `-` 버튼 클릭 | 버튼 비활성화, 재고는 0 이하로 내려가지 않음 |
| 재고 변경 실패 (네트워크 오류) | 에러 메시지 표시, UI를 이전 값으로 되돌림 |
| 주문 상태 변경 실패 | 에러 메시지 표시, 상태를 이전 값으로 되돌림 |
| 주문 데이터 로드 실패 | 에러 메시지 표시 |

### 6.6 데이터 모델 (프런트엔드 기준)

**주문 (Order)**
```
{
  id: number,
  orderTime: string,        // "2025-07-31T13:00:00"
  items: [
    {
      menuName: string,     // "아메리카노(ICE)"
      quantity: number,     // 1
      options: string[],    // ["샷 추가"]
      price: number         // 4000
    }
  ],
  totalPrice: number,       // 4000
  status: string            // "주문 접수" | "제조 중" | "제조 완료"
}
```

**재고 (Stock)**
```
{
  menuId: number,
  menuName: string,         // "아메리카노 (ICE)"
  quantity: number          // 10
}
```

**대시보드 통계 (DashboardStats)**
```
{
  totalOrders: number,      // 총 주문
  accepted: number,         // 주문 접수
  preparing: number,        // 제조 중
  completed: number         // 제조 완료
}
```